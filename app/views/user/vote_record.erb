<center>

<h2>Vote Records</h2>

<p>
  <a href="/">Vote</a>
</p>

-+-+-+-+-+-+-+-

<p>
<table border="1"> 
  
  <thead>
    <tr>
      <th colspan="3">Movie Ranks</th>
    </tr>

    <tr>
      <th> Rank </th>
      <th> Title </th>
      <th> Win Percent </th>
    </tr>
  </thead>

  <%
    x = Hash.new
    
    @movies.each do |m|
    x[m.id] = m.movie_win_percent
    end
    
    movie_sorted_rank_arr = x.sort_by(&:last).reverse
  %>
  
  <% rank = 0 %>
  
  <% movie_sorted_rank_arr.each do |movie| %>
    <tbody>
      <tr>
        <td>
          <center><%= rank += 1 %></center>
        </td>

        <td>
          <a href="/movie_stats/<%= movie[0] %>"><%= Movie.find_by_id(movie[0]).movie_title %></a>
        </td>
        
        <td>
          <center><%= movie[1] %> %</center>
        </td>
      </tr>
    </tbody>
  <% end %>

</table>
</p>
</center>
<!--
Define table to list the running top 3 vote results
Define dynamic, each-loop, table to list stats for each movie
Stats:
- Total times in vote battle (add upvotes and downvotes)
- Total upvotes
- Total downvotes
- Ratio of upvote to downvote
- Total vote button placement (movie_1 or movie_2)
- Button placement bias (movie_1 upvote, upvote:downvote ratio and vice versa)
-->